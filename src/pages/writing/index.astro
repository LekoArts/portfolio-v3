---
import SkipNavContent from '@components/a11y/skip-nav-content.astro'
import Box from '@components/primitives/box.astro'
import Container from '@components/primitives/container.astro'
import Seo from '@components/seo.astro'
import Heading from '@components/typography/heading.astro'
import Base from '@layouts/base.astro'
import { paddingResponsiveArrays } from '@styles/tokens/space'
import Text from '@components/typography/text.astro'
import Link from '@components/primitives/link.astro'
import Card from '@components/writing/card.astro'
import { cardGridStyle } from './_writing.css'
import { getCollection } from 'astro:content'
import { filterPublished, getSortedWriting } from '@utils/collection'
import { normalize } from '@utils/slash'
import Spacer from '@components/primitives/spacer.astro'
import { truncateText } from '@utils/text'

const posts = getSortedWriting(await getCollection('writing', filterPublished))
---

<Base>
	<Seo slot="seo" title="Writing" breadcrumbListItems={[{ name: `Writing`, url: `/writing/` }]} />
	<SkipNavContent>
		<Container py={paddingResponsiveArrays.paddingSmall}>
			<Box display="flex" flexDirection="column" gap={3}>
				<Heading as="h1">Writing</Heading>
				<Text variant="prominent">TODO</Text>
			</Box>
			<Spacer axis="vertical" size={8} />
			<Box display="flex" flexDirection="column" alignItems="center">
				<Box class={cardGridStyle}>
					{
						posts.map(({ data: post }) => (
							<Card
								slug={normalize(post.slug)}
								title={post.title}
								subtitle={post.subtitle}
								description={post.type === 'note' ? truncateText(post.description, 100) : post.description}
								icon={post.icon}
								variant={post.type === 'note' ? 'ghost' : 'default'}
							/>
						))
					}
				</Box>
			</Box>
		</Container>
	</SkipNavContent>
</Base>
