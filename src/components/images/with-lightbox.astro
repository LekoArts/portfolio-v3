---
import type { ImageMetadata } from 'astro'
import { withLightboxButtonStyle } from './with-lightbox.css'
import type { HTMLAttributes } from 'astro/types'

interface Props extends HTMLAttributes<'button'> {
	meta: ImageMetadata
	selector: string
	'data-index': number
}

const { meta, selector, class: className, ...rest } = Astro.props

const { src, width: maxWidth } = meta
---

<button
	class:list={[withLightboxButtonStyle, className]}
	aria-haspopup="dialog"
	data-selector={selector}
	data-src={src}
	data-sizes={`(min-width: ${maxWidth}px) ${maxWidth}px, 100vw`}
	{...rest}><slot /></button
>
