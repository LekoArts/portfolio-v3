---
import type { AlertStatus, SVGIconNames } from '@constants/types'
import Box from '@components/primitives/box.astro'
import SvgIcon from '@components/primitives/svg-icon.astro'
import { alertIconStyle, alertTitleStyle, alertVariants } from './alert.css'

interface Props {
	title: string
	status: AlertStatus
}

const iconMap: Record<AlertStatus, SVGIconNames> = {
	note: `info`,
	warning: `warning`,
	success: `check`,
	caution: `warning`,
} as const

const { title, status } = Astro.props
---

<Box
	borderRadius="lg"
	position="relative"
	my={[6, null, null, 12]}
	px={4}
	py={4}
	width="auto"
	role="alert"
	data-testid={`alert-${status}`}
	class={alertVariants[status]}
>
	<Box display="flex" flexDirection="row" alignItems="center" marginBottom={4}>
		<Box class={alertIconStyle}>
			<SvgIcon id={iconMap[status]} />
		</Box>
		<Box fontWeight="bold" class={alertTitleStyle}>
			{title}
		</Box>
	</Box><slot /></Box
>
